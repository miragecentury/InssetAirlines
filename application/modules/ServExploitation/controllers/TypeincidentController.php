<?php

class ServExploitation_TypeincidentController extends Zend_Controller_Action
{

    public function init()
    {
        $this->view->setLfiProtection(false);
        $this->view->render('../../../../views/scripts/user/_sidebar.phtml');
        $this->view->render('../../../../views/scripts/user/_login.phtml');
    }

    public function indexAction()
    {
        $this->view->allTypeIncident = ServExploitation_Model_TypeIncident::getListeTypeIncidentHTML();
    }

    public function newtypeincidentAction()
    {
        $request = $this->getRequest();
        if ($request->getParam('submit') != "Valider") {
            $newForm = new ServExploitation_Form_TypeIncident();
            $this->view->newForm = $newForm;
        } else {
            $item = new ServExploitation_Model_TypeIncident();
            $item->set_labelTypeIncident($request->getParam('labelTypeIncident'));
            $item->addTypeIncident();
            $this->_redirect('ServExploitation/Typeincident');
        }
    }

    public function updtypeincidentAction()
    {
     /*   $request = $this->getRequest();
        if ($request->getParam('submit') != "Valider") {
            $updForm = new ServExploitation_Form_TypeIncident();
            $item = new ServExploitation_Model_TypeIncident;
            $item = $item->getTypeIncident($request->getParam('id'));
            $updForm->getElement('labelTypeIncident')->setValue($item->get_labelTypeIncident());
            $this->view->updForm = $updForm;
        } else {
            $item = new ServExploitation_Model_TypeIncident();
            $item->set_labelTypeIncident($request->getParam('labelTypeIncident'));
            $item->addTypeIncident();
            $this->_redirect('ServExploitation/Typeincident');
        }*/
    }

    public function deltypeincidentAction()
    {
        $typeIncidentMod = new ServExploitation_Model_TypeIncident;
        $request = $this->getRequest();
        if ($request->getParam('ok') === "ok") {
            $typeIncidentMod->delTypeIncident($request->getParam('id'));
            $this->_redirect('ServExploitation/Typeincident');
        } else {
            $typeIncident = $typeIncidentMod->getTypeIncident($request->getParam('id'));
            $this->view->typeIncident = $typeIncident->getTypeIncidentHTML();
            $this->view->id = $request->getParam('id');
        }
    }

}